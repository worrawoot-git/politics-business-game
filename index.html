<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tycoon: Politics & Business Simulation</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #2d3436;
            --card: #dfe6e9;
            --text: #2d3436;
            --money: #00b894;
            --risk: #d63031;
            --conn: #0984e3;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        .container {
            background: var(--card);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 { color: #2d3436; margin: 0; text-transform: uppercase; letter-spacing: 1px; font-weight: 800; }
        h3 { margin-top: 5px; color: #636e72; font-weight: 400; }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .stat-box { display: flex; flex-direction: column; align-items: center; }
        .stat-val { font-size: 1.4rem; font-weight: bold; }
        .stat-label { font-size: 0.8rem; opacity: 0.7; }

        /* Scenario Card */
        .scenario-card {
            background: #fff;
            color: #333;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            text-align: left;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid var(--conn);
        }
        .tag { 
            background: #2d3436; color: white; padding: 4px 10px; border-radius: 20px; 
            font-size: 0.75rem; align-self: flex-start; margin-bottom: 10px; display: inline-block;
        }
        .s-title { margin: 0 0 10px 0; color: #2d3436; font-size: 1.2rem; font-weight: bold; }
        .s-desc { margin: 0; line-height: 1.6; font-size: 1rem; color: #636e72; }

        /* Buttons (Choices) */
        .btn-choice {
            width: 100%;
            padding: 15px;
            margin: 8px 0;
            border: none;
            border-radius: 10px;
            font-family: 'Sarabun';
            font-size: 0.95rem;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            color: #2d3436;
            border: 2px solid #b2bec3;
            text-align: left;
        }
        .btn-choice:hover { transform: translateY(-2px); border-color: var(--conn); background: #f1f2f6; }
        
        .risk-badge { 
            font-size: 0.7rem; background: #636e72; color: white; 
            padding: 2px 6px; border-radius: 4px; margin-left: 10px; white-space: nowrap;
        }

        /* Intro & End */
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.5s; }
        input { padding: 12px; width: 70%; border-radius: 8px; border: 1px solid #b2bec3; margin-bottom: 15px; font-family: 'Sarabun'; }
        
        .btn-main { 
            background: var(--conn); color: white; padding: 12px 30px; 
            border:none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1.1rem; 
            box-shadow: 0 4px 0 #0652dd; transition: 0.2s;
        }
        .btn-main:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #0652dd; }
        .btn-main:active { transform: translateY(2px); box-shadow: 0 0 0 #0652dd; }

        .btn-download { background: #00b894; box-shadow: 0 4px 0 #006266; margin-right: 10px;}
        .btn-download:hover { box-shadow: 0 6px 0 #006266; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Result Styles */
        .result-box {
            background: white; padding: 20px; border-radius: 15px; margin: 20px 0; text-align: left;
        }
    </style>
</head>
<body>

<div class="container" id="game-ui">

    <div id="step-intro" class="step active">
        <div style="font-size: 5rem; margin-bottom: 10px;">üèôÔ∏è</div>
        <h1>The Tycoon</h1>
        <h3>Politics & Business Simulation</h3>
        <p style="margin: 20px 0; color: #636e72;">
            ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏•‡∏Å‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏£‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏≤‡∏ì‡∏µ<br>
            ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏î‡πâ‡∏ß‡∏¢ "‡∏ù‡∏µ‡∏°‡∏∑‡∏≠" ‡∏´‡∏£‡∏∑‡∏≠ "‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≤‡∏¢"<br>
            ‡∏£‡∏∞‡∏ß‡∏±‡∏á! ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
        </p>
        <input type="text" id="company-name" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...">
        <br>
        <button class="btn-main" onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</button>
    </div>

    <div id="step-game" class="step">
        <div class="dashboard">
            <div class="stat-box">
                <span class="stat-val" id="val-money" style="color:var(--money)">10 M</span>
                <span class="stat-label">üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô</span>
            </div>
            <div class="stat-box">
                <span class="stat-val" id="val-conn" style="color:var(--conn)">0</span>
                <span class="stat-label">ü§ù ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≤‡∏¢</span>
            </div>
            <div class="stat-box">
                <span class="stat-val" id="val-risk" style="color:var(--risk)">0%</span>
                <span class="stat-label">üî• ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</span>
            </div>
        </div>

        <div style="display:flex; justify-content:space-between; color:#636e72; font-size:0.85rem; margin-bottom:8px;">
            <span>‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™‡∏ó‡∏µ‡πà: <span id="q-num">1</span>/8</span>
            <span id="q-topic">Topic</span>
        </div>

        <div class="scenario-card">
            <span class="tag" id="s-tag">EVENT</span>
            <div class="s-title" id="s-title">...</div>
            <div class="s-desc" id="s-desc">...</div>
        </div>

        <div id="choices-container">
            </div>
    </div>

    <div id="step-end" class="step">
        <h1 style="font-size: 1.5rem; color:#636e72;">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£</h1>
        <h2 id="end-company" style="color:#2d3436; margin: 10px 0; font-size: 2rem;"></h2>
        
        <div class="result-box">
            <div style="text-align:center; font-size: 4rem; margin-bottom: 10px;" id="end-icon"></div>
            <h3 id="end-status" style="text-align:center; font-size:1.4rem; color:#2d3436; margin:0;"></h3>
            <p id="end-desc" style="color:#636e72; line-height:1.6; text-align:center;"></p>
            
            <hr style="border:0; border-top:1px dashed #b2bec3; margin: 15px 0;">
            
            <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; text-align:center;">
                <div>
                    <small>üí∞ ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô</small><br>
                    <strong id="end-money" style="color:var(--money); font-size:1.2rem;"></strong>
                </div>
                <div>
                    <small>ü§ù ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≤‡∏¢</small><br>
                    <strong id="end-conn" style="color:var(--conn); font-size:1.2rem;"></strong>
                </div>
                <div>
                    <small>üî• ‡∏Ñ‡∏î‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°</small><br>
                    <strong id="end-risk" style="color:var(--risk); font-size:1.2rem;"></strong>
                </div>
            </div>
        </div>

        <div id="btn-group">
            <button class="btn-main btn-download" onclick="downloadResult()">üì∏ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ú‡∏• (PNG)</button>
            <button class="btn-main" style="background:#636e72; box-shadow: 0 4px 0 #2d3436;" onclick="location.reload()">üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
        </div>
    </div>

</div>

<script>
    // --- Configuration ---
    let stats = { money: 10, conn: 0, risk: 0 }; // Money in Millions
    let currentQ = 0;
    let companyName = "";

    // --- Scenarios Data (3 Choices each) ---
    const events = [
        {
            tag: "‡∏™‡∏±‡∏°‡∏õ‡∏ó‡∏≤‡∏ô‡∏†‡∏≤‡∏Ñ‡∏£‡∏±‡∏ê",
            title: "‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà",
            desc: "‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏• ‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡πâ‡∏≤‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏•‡πâ‡∏≥‡∏™‡∏°‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ '‡∏ã‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏π‡∏•' ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà",
            choices: [
                { txt: "‡∏¢‡∏∑‡πà‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏π‡∏•‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°", eff: { m: -2, c: 0, r: 0 }, riskLabel: "Low" },
                { txt: "‡∏à‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô '‡∏´‡∏•‡∏≤‡∏ô‡∏ä‡∏≤‡∏¢' ‡∏£‡∏±‡∏ê‡∏°‡∏ô‡∏ï‡∏£‡∏µ‡∏Ñ‡∏°‡∏ô‡∏≤‡∏Ñ‡∏°‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô", eff: { m: +15, c: +20, r: +15 }, riskLabel: "Med" },
                { txt: "‡∏Æ‡∏±‡πâ‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏π‡∏•! ‡∏ô‡∏±‡∏î‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏Ñ‡πâ‡∏Å‡∏Å‡∏±‡∏ô‡∏•‡∏±‡∏ö‡πÜ", eff: { m: +30, c: +10, r: +35 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°",
            title: "‡∏û.‡∏£.‡∏ö. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏∞‡∏≠‡∏≤‡∏î",
            desc: "‡∏£‡∏±‡∏ê‡∏™‡∏†‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏°‡∏•‡∏û‡∏¥‡∏©‡∏â‡∏ö‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏û‡∏∏‡πà‡∏á‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô 40% ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
            choices: [
                { txt: "‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (Green Tech)", eff: { m: -8, c: 0, r: -10 }, riskLabel: "Low" },
                { txt: "‡∏•‡πá‡∏≠‡∏ö‡∏ö‡∏µ‡πâ‡∏Å‡∏£‡∏£‡∏°‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£ ‡πÉ‡∏´‡πâ‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô", eff: { m: -2, c: +15, r: +10 }, riskLabel: "Med" },
                { txt: "‡πÅ‡∏≠‡∏ö‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô ‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏ö‡∏±‡∏î", eff: { m: +5, c: 0, r: +30 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô",
            title: "‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏≤‡∏™",
            desc: "NGO ‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏â‡∏ß‡πà‡∏≤ Supplier ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏¢‡∏∂‡∏î‡∏û‡∏≤‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏´‡∏∏‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡∏¥‡πà‡∏á‡∏•‡∏á‡πÄ‡∏´‡∏ß",
            choices: [
                { txt: "‡∏ï‡∏±‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Å‡∏±‡∏ö Supplier ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", eff: { m: -5, c: 0, r: -5 }, riskLabel: "Low" },
                { txt: "‡∏ó‡∏≥‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç PR ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå (Greenwashing) ‡∏Å‡∏•‡∏ö‡∏Ç‡πà‡∏≤‡∏ß", eff: { m: -3, c: +5, r: +5 }, riskLabel: "Med" },
                { txt: "‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≤‡∏¢‡∏ï‡∏≥‡∏£‡∏ß‡∏à‡∏Ç‡πà‡∏°‡∏Ç‡∏π‡πà‡∏û‡∏¢‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡∏õ‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πà‡∏≤‡∏ß", eff: { m: -1, c: -5, r: +40 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏†‡∏≤‡∏©‡∏µ",
            title: "‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏°‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£",
            desc: "‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ß‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏©‡∏µ ‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 5 ‡∏õ‡∏µ",
            choices: [
                { txt: "‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏à‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö", eff: { m: -10, c: 0, r: -20 }, riskLabel: "Low" },
                { txt: "‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ó‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏π‡πâ‡∏Ñ‡∏î‡∏µ", eff: { m: -4, c: 0, r: +10 }, riskLabel: "Med" },
                { txt: "‡∏à‡πà‡∏≤‡∏¢ '‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏£‡πâ‡∏≠‡∏ô‡∏ô‡πâ‡∏≥‡∏ä‡∏≤' ‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ä‡∏∏‡∏î‡∏ï‡∏£‡∏ß‡∏à", eff: { m: -1, c: +5, r: +25 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á",
            title: "‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏î‡∏°‡∏ó‡∏∏‡∏ô‡∏û‡∏£‡∏£‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á",
            desc: "‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà ‡∏û‡∏£‡∏£‡∏Ñ A (‡∏ù‡πà‡∏≤‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•) ‡πÅ‡∏•‡∏∞ ‡∏û‡∏£‡∏£‡∏Ñ B (‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡πâ‡∏≤‡∏ô‡∏°‡∏≤‡πÅ‡∏£‡∏á) ‡∏ï‡πà‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏ô‡∏°‡∏≤‡∏Ç‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì",
            choices: [
                { txt: "‡∏ß‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡πÑ‡∏°‡πà‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏û‡∏£‡∏£‡∏Ñ‡πÉ‡∏î‡πÄ‡∏•‡∏¢", eff: { m: 0, c: -10, r: 0 }, riskLabel: "Low" },
                { txt: "‡πÅ‡∏ó‡∏á‡∏Å‡∏±‡πä‡∏Å! ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÜ ‡∏Å‡∏±‡∏ô", eff: { m: -4, c: +10, r: +5 }, riskLabel: "Med" },
                { txt: "‡∏ó‡∏∏‡πà‡∏°‡∏´‡∏°‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏û‡∏£‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏ä‡∏ô‡∏∞ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏ß‡∏±‡∏á‡∏™‡∏±‡∏°‡∏õ‡∏ó‡∏≤‡∏ô", eff: { m: -8, c: +35, r: +20 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏ï‡πà‡∏≤‡∏á‡∏ä‡∏≤‡∏ï‡∏¥",
            title: "‡∏ó‡∏∏‡∏ô‡∏à‡∏µ‡∏ô‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡∏ö‡∏∏‡∏Å‡∏ï‡∏•‡∏≤‡∏î",
            desc: "‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏∏‡πà‡∏°‡∏ï‡∏•‡∏≤‡∏î ‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏ô‡∏Å‡∏≥‡πÑ‡∏£",
            choices: [
                { txt: "‡∏™‡∏π‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", eff: { m: -5, c: 0, r: 0 }, riskLabel: "Low" },
                { txt: "‡∏Ñ‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£ (M&A) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô", eff: { m: -10, c: +5, r: +5 }, riskLabel: "Med" },
                { txt: "‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ê‡∏≠‡∏≠‡∏Å‡∏Å‡∏é‡∏Å‡∏µ‡∏î‡∏Å‡∏±‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤ (Protectionism)", eff: { m: -3, c: +20, r: +15 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥",
            title: "‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡πÉ‡∏´‡∏ç‡πà",
            desc: "‡∏û‡∏≤‡∏¢‡∏∏‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏°‡∏ô‡πâ‡∏≥ ‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å ‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡∏°‡∏µ‡∏á‡∏ö‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏†‡∏±‡∏¢",
            choices: [
                { txt: "‡∏Å‡∏π‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏°‡∏≤‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡πÄ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö", eff: { m: -12, c: 0, r: 0 }, riskLabel: "Low" },
                { txt: "‡∏Ç‡∏≠‡∏•‡∏±‡∏î‡∏Ñ‡∏¥‡∏ß‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô", eff: { m: +5, c: -5, r: +10 }, riskLabel: "Med" },
                { txt: "‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÇ‡∏î‡∏¢‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà", eff: { m: +10, c: +5, r: +30 }, riskLabel: "High" }
            ]
        },
        {
            tag: "‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",
            title: "‡∏ô‡∏≥‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå (IPO)",
            desc: "‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÇ‡∏•‡∏Å ‡πÅ‡∏ï‡πà ‡∏Å.‡∏•.‡∏ï. ‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏≤‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ",
            choices: [
                { txt: "‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ 100% ‡πÅ‡∏°‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡∏à‡∏∞‡∏î‡∏π‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á", eff: { m: -3, c: 0, r: -10 }, riskLabel: "Low" },
                { txt: "‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏™‡∏ß‡∏¢‡∏´‡∏£‡∏π (Window Dressing)", eff: { m: +10, c: 0, r: +20 }, riskLabel: "Med" },
                { txt: "‡πÄ‡∏ä‡∏¥‡∏ç‡∏≠‡∏î‡∏µ‡∏ï‡∏ô‡∏≤‡∏¢‡∏Å‡∏£‡∏±‡∏ê‡∏°‡∏ô‡∏ï‡∏£‡∏µ‡∏°‡∏≤‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î", eff: { m: -5, c: +30, r: +10 }, riskLabel: "High" }
            ]
        }
    ];

    // --- Game Logic ---

    function startGame() {
        const inputName = document.getElementById('company-name').value;
        if (!inputName.trim()) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°"); return; }
        companyName = inputName;
        
        document.getElementById('step-intro').classList.remove('active');
        document.getElementById('step-game').classList.add('active');
        renderEvent();
    }

    function renderEvent() {
        // Game Over Conditions
        if (stats.money <= -10) { endGame("bankrupt"); return; }
        if (stats.risk >= 90 && Math.random() > 0.3) { endGame("jail"); return; }
        if (currentQ >= events.length) { endGame(); return; }

        const e = events[currentQ];
        
        // Update UI Text
        document.getElementById('q-num').innerText = currentQ + 1;
        document.getElementById('q-topic').innerText = e.tag;
        document.getElementById('s-tag').innerText = e.tag;
        document.getElementById('s-title').innerText = e.title;
        document.getElementById('s-desc').innerText = e.desc;

        // Render Choices
        const choicesContainer = document.getElementById('choices-container');
        choicesContainer.innerHTML = ''; // Clear old buttons

        e.choices.forEach((choice, index) => {
            const btn = document.createElement('button');
            btn.className = 'btn-choice';
            
            // Color code risk badge
            let badgeColor = choice.riskLabel === 'High' ? '#d63031' : (choice.riskLabel === 'Med' ? '#fdcb6e' : '#00b894');
            
            btn.innerHTML = `
                <span>${choice.txt}</span>
                <span class="risk-badge" style="background:${badgeColor}">Risk: ${choice.riskLabel}</span>
            `;
            btn.onclick = () => makeChoice(choice.eff);
            choicesContainer.appendChild(btn);
        });

        updateStatsDisplay();
    }

    function makeChoice(eff) {
        stats.money += eff.m;
        stats.conn += eff.c;
        stats.risk += eff.r;

        // Constraint Limits
        stats.risk = Math.max(0, Math.min(100, stats.risk));
        stats.conn = Math.max(0, Math.min(100, stats.conn));

        currentQ++;
        renderEvent();
    }

    function updateStatsDisplay() {
        document.getElementById('val-money').innerText = stats.money + " M";
        document.getElementById('val-conn').innerText = stats.conn;
        document.getElementById('val-risk').innerText = stats.risk + "%";
        
        // Dynamic Color for Risk
        const riskEl = document.getElementById('val-risk');
        if(stats.risk < 40) riskEl.style.color = "#00b894";
        else if(stats.risk < 75) riskEl.style.color = "#fdcb6e";
        else riskEl.style.color = "#d63031";
    }

    function endGame(forceType = null) {
        document.getElementById('step-game').classList.remove('active');
        document.getElementById('step-end').classList.add('active');

        document.getElementById('end-company').innerText = companyName;
        document.getElementById('end-money').innerText = stats.money + " M";
        document.getElementById('end-conn').innerText = stats.conn;
        document.getElementById('end-risk').innerText = stats.risk + "%";

        let status, desc, icon;

        if (forceType === "bankrupt") {
            status = "‡∏•‡πâ‡∏°‡∏•‡∏∞‡∏•‡∏≤‡∏¢ (Bankrupt)";
            desc = "‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏ï‡∏¥‡∏î‡∏•‡∏ö ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏´‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏ü‡πâ‡∏≠‡∏á‡∏•‡πâ‡∏°‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡∏∂‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î";
            icon = "üìâ";
        } else if (forceType === "jail") {
            status = "‡∏ô‡∏±‡∏Å‡πÇ‡∏ó‡∏©‡∏Ñ‡∏î‡∏µ‡∏â‡πâ‡∏≠‡πÇ‡∏Å‡∏á (Jail)";
            desc = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏∞‡∏™‡∏°‡πÑ‡∏ß‡πâ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏≠‡∏≠‡∏Å! ‡∏õ.‡∏õ.‡∏ä. ‡∏ä‡∏µ‡πâ‡∏°‡∏π‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡πá‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏ö‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏à‡∏≥";
            icon = "üëÆ";
        } else {
            // Success Endings based on stats
            if (stats.conn > 60 && stats.risk > 50) {
                status = "‡πÄ‡∏à‡πâ‡∏≤‡∏û‡πà‡∏≠‡∏™‡∏±‡∏°‡∏õ‡∏ó‡∏≤‡∏ô (The Crony Tycoon)";
                desc = "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏°‡∏´‡∏≤‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ‡∏ú‡∏π‡πâ‡∏ó‡∏£‡∏á‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏• ‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡∏£‡∏á‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏ï‡πà‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏ï‡∏£‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≤‡∏¢‡∏ó‡∏∏‡∏ô‡∏ú‡∏π‡∏Å‡∏Ç‡∏≤‡∏î";
                icon = "üßõ‚Äç‚ôÇÔ∏è";
            } else if (stats.money > 40 && stats.risk < 30) {
                status = "‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô‡∏ô‡∏±‡∏Å‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏°‡∏∑‡∏≠‡∏™‡∏∞‡∏≠‡∏≤‡∏î (Market Legend)";
                desc = "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏≤‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏∏‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ù‡∏µ‡∏°‡∏∑‡∏≠‡∏•‡πâ‡∏ß‡∏ô‡πÜ ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏≤‡∏Å‡∏•‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á";
                icon = "ü¶Ñ";
            } else if (stats.money > 20) {
                status = "‡∏ô‡∏±‡∏Å‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏≠‡∏≤‡∏ï‡∏±‡∏ß‡∏£‡∏≠‡∏î (The Survivor)";
                desc = "‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏Ñ‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏°‡∏≤‡πÑ‡∏î‡πâ ‡∏°‡∏µ‡πÅ‡∏ú‡∏•‡∏ö‡πâ‡∏≤‡∏á ‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏á ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏£‡∏≠‡∏î‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏ù‡∏±‡πà‡∏á";
                icon = "üè¢";
            } else {
                status = "‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á (SME)";
                desc = "‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏°‡∏±‡∏ô‡πÇ‡∏´‡∏î‡∏£‡πâ‡∏≤‡∏¢ ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏Å‡∏ô‡∏±‡∏Å ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏Å‡∏á‡πÉ‡∏Ñ‡∏£";
                icon = "üå±";
            }
        }

        document.getElementById('end-status').innerText = status;
        document.getElementById('end-desc').innerText = desc;
        document.getElementById('end-icon').innerText = icon;
    }

    // --- Download Function ---
    function downloadResult() {
        const ui = document.getElementById("game-ui");
        const btnGroup = document.getElementById("btn-group");
        
        // Hide buttons temporarily
        btnGroup.style.display = 'none';
        
        html2canvas(ui, { scale: 2 }).then(canvas => {
            // Restore buttons
            btnGroup.style.display = 'block';
            
            // Trigger Download
            const link = document.createElement("a");
            link.download = `Report-${companyName}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
        });
    }
</script>

</body>
</html>
